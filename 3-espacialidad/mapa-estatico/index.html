<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Mapa de Gustavo Zalamea</title>
    <link rel="stylesheet" href="leaflet/leaflet.css" />
    
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="leaflet/leaflet.js"></script>
   
   <style>
      body{
        font-family: Helvetica, Arial, sans-serif;
        font-size: 16px;
      }
      header{
        text-align: center;
      }
      main{
        margin-left: 2em;
        margin-right: 2em;
      }
      .thumb{
        width: 100%;
      }
      #mapa { height: 800px; }
  </style>

  </head>

  <body>
    <header> <h1>Mapa de las postales de Gustavo Zalamea</h1></header>

    <main id="mapa">

    </main>
    <script>
      // los datos para el mapa.  Es un array de objetos
      var datos = [
        {
          "titulo": "Bogotá (la desmesura, a Melville)",
          "autor": "Gustavo Zalamea",
          "fecha": 1994,
          "lugar": "Monserrate",
          "lat": 4.5962015,
          "lon": -74.0640615,
          "thumbnail": "img/6626c20c5dc38a9901bc8a76bd73dba7.jpg"
        },
        {
          "titulo": "Congreso – Titanic",
          "autor": "Gustavo Zalamea",
          "fecha": 1994,
          "lugar": "Plaza de Bolivar",
          "lat": 4.5962002,
          "lon": -74.0767726,
          "thumbnail": "img/09f2fd693bb9bb97fe89abf6ffd3a7d7.jpg"
        },
        {
          "titulo": "Huevo de Condor Gigante (Avenida El Dorado con Avenida Boyacá)",
          "autor": "Gustavo Zalamea",
          "fecha": 1994,
          "lugar": "Av Boyacá, Av El Dorado",
          "lat": 4.666513,
          "lon": -74.1137347,
          "thumbnail": "img/2253da15c6efa488b4ee6b7c1e9cf4f9.jpg"
        },
        {
          "titulo": "Río Chapinero (a la altura de la plaza de Lourdes), Gustavo Zalamea, tarjeta postal, 1994.",
          "autor": "Gustavo Zalamea",
          "fecha": 1994,
          "lugar": "Plaza de Lourdes",
          "lat": 4.6496279,
          "lon": -74.0632791,
          "thumbnail": "img/754d7450932034ae98a391dd6ef16997.jpg"
        }
        ]


      // Configuración del mapa
      var mymap = L.map('mapa').setView([4.6046079, -74.0904356], 13);

        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            maxZoom: 18,
            tileSize: 512,
            zoomOffset: -1
        }).addTo(mymap);

        //Iteramos por los datos, creando un punto y un popup por elemento
        datos.forEach((dato, i) => {
          //Html para la info del popup
          var texto = "Título: " + dato.titulo + "<br> Fecha: " + dato.fecha + "<br> Lugar: " + dato.lugar + "<br>"
          //Html para la imagen
          var imagen = "<img class='thumb' src='" + dato.thumbnail + "'/>"
          //unimos el texto con la imagen
          var popup = texto + imagen
          //Agregamos el marcador y el popup al mapa
          L.marker([dato.lat, dato.lon]).addTo(mymap)
            .bindPopup(popup)
            //esto abre el popup
            .openPopup();
        });

    </script>
  </body>
</html>
